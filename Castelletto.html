<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Classifica Coppa del Nonno</title>
  <style>
    body {
      background-color: #2b2b2b; /* sfondo pagina grigio scuro */
      font-family: Arial, sans-serif;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      background-color: #2b2b2b; /* sfondo tabella */
    }
    th, td {
      border: 1px solid red; /* griglia rossa */
      padding: 8px;
      text-align: center;
      color: white; /* testo bianco */
      cursor: pointer;
    }
    thead tr {
      background-color: black; /* intestazione nera */
    }
    tbody tr:nth-child(odd) {
      background-color: #4d4d4d; /* grigio scuro */
    }
    tbody tr:nth-child(even) {
      background-color: #808080; /* grigio chiaro */
    }
    th:hover {
      background-color: #222; /* effetto hover */
    }
    .asc::after {
      content: " ‚Üë";
    }
    .desc::after {
      content: " ‚Üì";
    }
    th.no-sort {
      cursor: default; /* colonna non ordinabile */
    }
	/* Colore link in vari stati */
a:link {
  color: #ff0000; /* rosso acceso per link normali */
  text-decoration: none; /* rimuove sottolineatura */
}

a:visited {
  color: #cc0000; /* rosso pi√π scuro per link gi√† visitati */
}

a:hover {
  color: #ff4d4d; /* rosso chiaro al passaggio */
  text-decoration: underline; /* sottolinea al passaggio */
}

a:active {
  color: #990000; /* rosso scuro quando cliccato */
}
.pilot {
  display: flex;
  align-items: center; /* allinea verticalmente al centro */
  justify-content: flex-start; /* bandiera e testo allineati a sinistra */
}
.flag {
  width: 24px;
  margin-right: 8px;
}
  </style>
</head>
<body>
 <div class="header">
  <!-- Logo della pista -->
  <img src="tracciati\castelletto.jpg" alt="Logo Castelletto" style="display:block; margin:20px auto; width:751px;">
  <!-- Tasto Home -->
  <a href="index.html" class="home-btn">üè† Home</a>
 </div>

  <table id="myTable">
    <thead>
      <tr>
        <th class="no-sort">Posizione</th>
        <th>Pilota</th>
        <th>Auto</th>
        <th>Velocit√† Massima</th>
        <th>Miglior giro</th>
		<th>Video</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>1</td>
        <td>
         <div class="pilot">
         <img src="bandiere/italia-48.png" alt="Italia" class="flag">
         <span>Fede</span>
         </div>
        </td>
        <td>Red Bull</td>
        <td>390</td>
        <td>1:20.5</td>
		<td><a href=https://www.youtube.com/watch?v=dQw4w9WgXcQ&list=RDdQw4w9WgXcQ&start_radio=1>Video</a></td>
      </tr>
      <tr>
        <td>2</td>
        <td>
         <div class="pilot">
         <img src="bandiere/arcobaleno-48.png" alt="Italia" class="flag">
         <span>Manzo</span>
         </div>
        </td>
        <td>Ferrari</td>
        <td>280</td>
        <td>1:21.2</td>
		<td><a href=https://www.youtube.com/watch?v=E8gmARGvPlI&list=RDE8gmARGvPlI&start_radio=1>Video</a></td>
      </tr>
      <tr>
        <td>3</td>
        <td>
         <div class="pilot">
         <img src="bandiere/italia-48.png" alt="Italia" class="flag">
         <span>Ale</span>
         </div>
        </td>
        <td>Mercedes</td>
        <td>310</td>
        <td>1:19.8</td>
		<td><a href=https://www.youtube.com/watch?v=7SiFPFxcEcg&list=RD7SiFPFxcEcg&start_radio=1>Video</a></td>
      </tr>
    </tbody>
  </table>

<script>
    // Funzione che converte un tempo "MM:SS.xx" o "MM:SS:xx" in centesimi di secondo
    function parseTime(str) {
      const parts = str.split(/[:.]/); // divide su ":" e "."
      const minutes = parseInt(parts[0], 10) || 0;
      const seconds = parseInt(parts[1], 10) || 0;
      const centiseconds = parseInt(parts[2], 10) || 0;
      return (minutes * 60 + seconds) * 100 + centiseconds;
    }

    function sortTable(table, colIndex, thElement, forceDesc = false) {
      const tbody = table.tBodies[0];
      const rows = Array.from(tbody.querySelectorAll("tr"));
      let asc = table.dataset.sortOrder !== "asc";

      // Se forziamo decrescente all'apertura
      if (forceDesc) asc = false;

      rows.sort((a, b) => {
        const aText = a.cells[colIndex].textContent.trim();
        const bText = b.cells[colIndex].textContent.trim();

        // prova come tempo
        const aTime = parseTime(aText);
        const bTime = parseTime(bText);

        if (!isNaN(aTime) && !isNaN(bTime)) {
          return asc ? aTime - bTime : bTime - aTime;
        }
        // fallback: confronto testuale
        return asc ? aText.localeCompare(bText) : bText.localeCompare(aText);
      });

      rows.forEach(row => tbody.appendChild(row));
      table.dataset.sortOrder = asc ? "asc" : "desc";

      // aggiorna frecce
      table.querySelectorAll("th").forEach(th => th.classList.remove("asc", "desc"));
      if (thElement) thElement.classList.add(asc ? "asc" : "desc");

      // aggiorna numerazione Posizione
      Array.from(tbody.querySelectorAll("tr")).forEach((row, i) => {
        row.cells[0].textContent = i + 1;
      });
    }

    // Attiva ordinamento cliccando sulle colonne (tranne Posizione)
    document.querySelectorAll("#myTable th").forEach((th, index) => {
      if (!th.classList.contains("no-sort")) {
        th.addEventListener("click", () => {
          sortTable(document.getElementById("myTable"), index, th);
        });
      }
    });

    // Ordinamento automatico all'apertura per colonna "Miglior giro" (indice 4)
    window.onload = () => {
      const table = document.getElementById("myTable");
      const th = table.querySelectorAll("th")[4]; // colonna Miglior giro
      sortTable(table, 4, th, true); // forza ordine decrescente
    };
</script>

</body>
</html>




